{"version":3,"file":"index.js","sources":["../src/utils/defer.ts","../src/utils/waitFor.ts","../src/utils/injectScript.ts","../src/utils/injectStylesheet.ts","../src/utils/isSSR.ts","../src/utils/once.ts","../src/utils/overwriteArray.ts","../src/utils/overwriteObject.ts","../src/utils/preloadResource.ts","../src/utils/shallowCompareArrays.ts","../src/utils/uid.ts","../src/utils/uniq.ts","../src/utils/waitForWindowEntry.ts","../src/utils/filterObjectValues.ts","../src/utils/filterBlankObjectValues.ts","../src/utils/mapObjectValues.ts","../src/utils/without.ts","../src/cdn/ck/createCKCdnUrl.ts","../src/cdn/ckbox/createCKBoxCdnUrl.ts","../src/utils/isSemanticVersion.ts","../src/installation-info/getCKBaseBundleInstallationInfo.ts","../src/docs/createCKDocsUrl.ts","../src/cdn/ck/createCKCdnBaseBundlePack.ts","../src/cdn/ck/createCKCdnPremiumBundlePack.ts","../src/cdn/utils/loadCKCdnResourcesPack.ts","../src/cdn/utils/combineCKCdnBundlesPacks.ts","../src/installation-info/getCKBoxInstallationInfo.ts","../src/cdn/ckbox/createCKBoxCdnBundlePack.ts","../src/cdn/plugins/combineCdnPluginsPacks.ts","../src/cdn/loadCKEditorCloud.ts"],"sourcesContent":["/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\nexport type Defer<E> = {\n\tpromise: Promise<E>;\n\tresolve: ( value: E ) => void;\n};\n\n/**\n * This function generates a promise that can be resolved by invoking the returned `resolve` method.\n * It proves to be beneficial in the creation of various types of locks and semaphores.\n *\n * It can be replaced with `Promise.withResolvers()` in the future.\n */\nexport function createDefer<E = void>(): Defer<E> {\n\tconst deferred: Defer<E> = {\n\t\tresolve: null as any,\n\t\tpromise: null as any\n\t};\n\n\tdeferred.promise = new Promise<E>( resolve => {\n\t\tdeferred.resolve = resolve;\n\t} );\n\n\treturn deferred;\n}\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\nimport type { Awaitable } from '../types/Awaitable.js';\n\n/**\n * Waits for the provided callback to succeed. The callback is executed multiple times until it succeeds or the timeout is reached.\n * It's executed immediately and then with a delay defined by the `retry` option.\n *\n * @param callback The callback to execute.\n * @param config Configuration for the function.\n * @returns A promise that resolves when the callback succeeds.\n *\n * @example\n * ```ts\n * await waitFor( async () => {\n * \tconst element = document.querySelector( '.my-element' );\n * \tif ( !element ) {\n * \t\tthrow new Error( 'Element not found.' );\n * \t}\n * } );\n * ```\n */\nexport function waitFor<R>(\n\tcallback: () => Awaitable<R>,\n\t{\n\t\ttimeOutAfter = 500,\n\t\tretryAfter = 100\n\t}: WaitForConfig = {}\n): Promise<R> {\n\t// Retry the callback until it succeeds or the timeout is reached.\n\treturn new Promise<R>( ( resolve, reject ) => {\n\t\tconst startTime = Date.now();\n\t\tlet lastError: Error | null = null;\n\n\t\tconst timeoutTimerId = setTimeout( () => {\n\t\t\treject( lastError ?? new Error( 'Timeout' ) );\n\t\t}, timeOutAfter );\n\n\t\tconst tick = async () => {\n\t\t\ttry {\n\t\t\t\tconst result = await callback();\n\t\t\t\tclearTimeout( timeoutTimerId );\n\t\t\t\tresolve( result );\n\t\t\t} catch ( err: any ) {\n\t\t\t\tlastError = err;\n\n\t\t\t\tif ( Date.now() - startTime > timeOutAfter ) {\n\t\t\t\t\treject( err );\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout( tick, retryAfter );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\ttick();\n\t} );\n}\n\n/**\n * Configuration for the `waitFor` function.\n */\nexport type WaitForConfig = {\n\t// The time in milliseconds after which the function will stop retrying and reject the promise.\n\ttimeOutAfter?: number;\n\n\t// The time in milliseconds between retries.\n\tretryAfter?: number;\n};\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * Map of injected scripts. It is used to prevent injecting the same script multiple times.\n * It happens quite often in React Strict mode when the component is rendered twice.\n */\nexport const INJECTED_SCRIPTS = new Map<string, Promise<void>>();\n\n/**\n * Injects a script into the document.\n *\n * @param src The URL of the script to be injected.\n * @param props Additional properties used to decide how the script should be injected.\n * @param props.attributes Additional attributes to be set on the script element.\n * @returns A promise that resolves when the script is loaded.\n */\nexport function injectScript(\n\tsrc: string,\n\t{ attributes }: InjectScriptProps = {}\n): Promise<void> {\n\t// Return the promise if the script is already injected by this function.\n\tif ( INJECTED_SCRIPTS.has( src ) ) {\n\t\treturn INJECTED_SCRIPTS.get( src )!;\n\t}\n\n\t// Return the promise if the script is already present in the document but not injected by this function.\n\t// We are not sure if the script is loaded or not, so we have to show warning in this case.\n\tconst maybePrevScript = document.querySelector( `script[src=\"${ src }\"]` );\n\n\tif ( maybePrevScript ) {\n\t\tconsole.warn( `Script with \"${ src }\" src is already present in DOM!` );\n\t\tmaybePrevScript.remove();\n\t}\n\n\t// Inject the script and return the promise.\n\tconst promise = new Promise<void>( ( resolve, reject ) => {\n\t\tconst script = document.createElement( 'script' );\n\n\t\tscript.onerror = reject;\n\t\tscript.onload = () => {\n\t\t\tresolve();\n\t\t};\n\n\t\t// Set additional attributes if provided.\n\t\tfor ( const [ key, value ] of Object.entries( attributes || {} ) ) {\n\t\t\tscript.setAttribute( key, value );\n\t\t}\n\n\t\tscript.setAttribute( 'data-injected-by', 'ckeditor-integration' );\n\n\t\tscript.type = 'text/javascript';\n\t\tscript.async = true;\n\t\tscript.src = src;\n\n\t\tdocument.head.appendChild( script );\n\n\t\t// It should remove script if script is being removed from the DOM.\n\t\tconst observer = new MutationObserver( mutations => {\n\t\t\tconst removedNodes = mutations.flatMap( mutation => Array.from( mutation.removedNodes ) );\n\n\t\t\tif ( removedNodes.includes( script ) ) {\n\t\t\t\tINJECTED_SCRIPTS.delete( src );\n\t\t\t\tobserver.disconnect();\n\t\t\t}\n\t\t} );\n\n\t\tobserver.observe( document.head, {\n\t\t\tchildList: true,\n\t\t\tsubtree: true\n\t\t} );\n\t} );\n\n\tINJECTED_SCRIPTS.set( src, promise );\n\n\treturn promise;\n}\n\n/**\n * Props for the `injectScript` function.\n */\nexport type InjectScriptProps = {\n\tattributes?: Record<string, any>;\n};\n\n/**\n * Injects multiple scripts into the document in parallel.\n *\n * @param sources The URLs of the scripts to be injected.\n * @param props Additional properties used to decide how the script should be injected.\n * @returns A promise that resolves when all scripts are loaded.\n */\nexport async function injectScriptsInParallel( sources: Array<string>, props?: InjectScriptProps ): Promise<void> {\n\tawait Promise.all(\n\t\tsources.map( src => injectScript( src, props ) )\n\t);\n}\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * Map of injected stylesheets. It's used to prevent injecting the same stylesheet multiple times.\n * It happens quite often in React Strict mode when the component is rendered twice.\n */\nexport const INJECTED_STYLESHEETS = new Map<string, Promise<void>>();\n\n/**\n * Injects a stylesheet into the document.\n *\n * @param props.href The URL of the stylesheet to be injected.\n * @param props.placementInHead The placement of the stylesheet in the head.\n * @param props.attributes Additional attributes to be set on the link element.\n * @returns A promise that resolves when the stylesheet is loaded.\n */\nexport function injectStylesheet(\n\t{\n\t\thref,\n\t\tplacementInHead = 'start',\n\t\tattributes = {}\n\t}: InjectStylesheetProps\n): Promise<void> {\n\t// Return the promise if the stylesheet is already injected by this function.\n\tif ( INJECTED_STYLESHEETS.has( href ) ) {\n\t\treturn INJECTED_STYLESHEETS.get( href )!;\n\t}\n\n\t// Return the promise if the stylesheet is already present in the document but not injected by this function.\n\t// We are not sure if the stylesheet is loaded or not, so we have to show a warning in this case.\n\tconst maybePrevStylesheet = document.querySelector( `link[href=\"${ href }\"][rel=\"stylesheet\"]` );\n\n\tif ( maybePrevStylesheet ) {\n\t\tconsole.warn( `Stylesheet with \"${ href }\" href is already present in DOM!` );\n\t\tmaybePrevStylesheet.remove();\n\t}\n\n\t// Append the link tag to the head.\n\tconst appendLinkTagToHead = ( link: HTMLLinkElement ) => {\n\t\t// Inject styles after the stylesheets that are already present in the head.\n\t\t// Do not specify the `rel` attribute because we want to inject the stylesheet even after\n\t\t// preloading link tags.\n\t\tconst previouslyInjectedLinks = Array.from(\n\t\t\tdocument.head.querySelectorAll( 'link[data-injected-by=\"ckeditor-integration\"]' )\n\t\t);\n\n\t\tswitch ( placementInHead ) {\n\t\t\t// It'll append styles *before* the stylesheets that are already present in the head\n\t\t\t// but after the ones that are injected by this function.\n\t\t\tcase 'start':\n\t\t\t\tif ( previouslyInjectedLinks.length ) {\n\t\t\t\t\tpreviouslyInjectedLinks.slice( -1 )[ 0 ].after( link );\n\t\t\t\t} else {\n\t\t\t\t\tdocument.head.insertBefore( link, document.head.firstChild );\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\t// It'll append styles *after* the stylesheets already in the head.\n\t\t\tcase 'end':\n\t\t\t\tdocument.head.appendChild( link );\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\t// Inject the stylesheet and return the promise.\n\tconst promise = new Promise<void>( ( resolve, reject ) => {\n\t\tconst link = document.createElement( 'link' );\n\n\t\t// Set additional attributes if provided.\n\t\tfor ( const [ key, value ] of Object.entries( attributes || {} ) ) {\n\t\t\tlink.setAttribute( key, value );\n\t\t}\n\n\t\tlink.setAttribute( 'data-injected-by', 'ckeditor-integration' );\n\n\t\tlink.rel = 'stylesheet';\n\t\tlink.href = href;\n\n\t\tlink.onerror = reject;\n\t\tlink.onload = () => {\n\t\t\tresolve();\n\t\t};\n\n\t\tappendLinkTagToHead( link );\n\n\t\t// It should remove stylesheet if stylesheet is being removed from the DOM.\n\t\tconst observer = new MutationObserver( mutations => {\n\t\t\tconst removedNodes = mutations.flatMap( mutation => Array.from( mutation.removedNodes ) );\n\n\t\t\tif ( removedNodes.includes( link ) ) {\n\t\t\t\tINJECTED_STYLESHEETS.delete( href );\n\t\t\t\tobserver.disconnect();\n\t\t\t}\n\t\t} );\n\n\t\tobserver.observe( document.head, {\n\t\t\tchildList: true,\n\t\t\tsubtree: true\n\t\t} );\n\t} );\n\n\tINJECTED_STYLESHEETS.set( href, promise );\n\n\treturn promise;\n}\n\n/**\n * Props for the `injectStylesheet` function.\n */\ntype InjectStylesheetProps = {\n\n\t/**\n\t * The URL of the stylesheet to be injected.\n\t */\n\thref: string;\n\n\t/**\n\t * The placement of the stylesheet in the head. It can be either at the start or at the end\n\t * of the head. Default is 'start' because it allows user to override the styles easily.\n\t */\n\tplacementInHead?: 'start' | 'end';\n\n\t/**\n\t * Additional attributes to set on the link tag.\n\t */\n\tattributes?: Record<string, any>;\n};\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\nexport function isSSR(): boolean {\n\treturn typeof window === 'undefined';\n}\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * Ensures that passed function will be executed only once.\n */\nexport function once<A extends Array<any>, R = void>( fn: ( ...args: A ) => R ): ( ...args: A ) => R {\n\tlet lastResult: { current: R } | null = null;\n\n\treturn ( ...args: A ): R => {\n\t\tif ( !lastResult ) {\n\t\t\tlastResult = {\n\t\t\t\tcurrent: fn( ...args )\n\t\t\t};\n\t\t}\n\n\t\treturn lastResult.current;\n\t};\n}\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * Clear whole array while keeping its reference.\n */\nexport function overwriteArray<A extends Array<any>>( source: A, destination: A ): A {\n\tdestination.length = 0;\n\tdestination.push( ...source );\n\n\treturn destination;\n}\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * Clears whole object while keeping its reference.\n */\nexport function overwriteObject<O extends Record<string, any>>( source: O, destination: O ): O {\n\tfor ( const prop of Object.getOwnPropertyNames( destination ) ) {\n\t\tdelete destination[ prop ];\n\t}\n\n\t// Prevent assigning self referencing attributes which crashes `Object.assign`.\n\tfor ( const [ key, value ] of Object.entries( source ) ) {\n\t\tif ( value !== destination && key !== 'prototype' && key !== '__proto__' ) {\n\t\t\t( destination as any )[ key ] = value;\n\t\t}\n\t}\n\n\treturn destination;\n}\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * Appends a `<link>` element to the `<head>` to preload a resource.\n *\n * \t* It should detect if the resource is already preloaded.\n * \t* It should detect type of the resource and set the `as` attribute accordingly.\n *\n * @param url The URL of the resource to preload.\n * @param props Additional properties for the preload.\n * @param props.attributes Additional attributes to be set on the `<link>` element.\n */\nexport function preloadResource(\n\turl: string,\n\t{ attributes }: PreloadResourceProps = {}\n): void {\n\tif ( document.head.querySelector( `link[href=\"${ url }\"][rel=\"preload\"]` ) ) {\n\t\treturn;\n\t}\n\n\tconst link = document.createElement( 'link' );\n\n\t// Set additional attributes if provided.\n\tfor ( const [ key, value ] of Object.entries( attributes || {} ) ) {\n\t\tlink.setAttribute( key, value );\n\t}\n\n\tlink.setAttribute( 'data-injected-by', 'ckeditor-integration' );\n\n\tlink.rel = 'preload';\n\tlink.as = detectTypeOfResource( url );\n\tlink.href = url;\n\n\tdocument.head.insertBefore( link, document.head.firstChild );\n}\n\n/**\n * Properties for the `preloadResource` function.\n */\ntype PreloadResourceProps = {\n\tattributes?: Record<string, any>;\n};\n\n/**\n * Detects the type of the resource based on its URL.\n */\nfunction detectTypeOfResource( url: string ): string {\n\tswitch ( true ) {\n\t\tcase /\\.css$/.test( url ):\n\t\t\treturn 'style';\n\n\t\tcase /\\.js$/.test( url ):\n\t\t\treturn 'script';\n\n\t\tdefault:\n\t\t\treturn 'fetch';\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * Shallow comparison of two arrays.\n */\nexport function shallowCompareArrays<T>(\n\ta: Readonly<Array<T> | null>,\n\tb: Readonly<Array<T> | null>\n): boolean {\n\tif ( a === b ) {\n\t\treturn true;\n\t}\n\n\tif ( !a || !b ) {\n\t\treturn false;\n\t}\n\n\tfor ( let i = 0; i < a.length; ++i ) {\n\t\tif ( a[ i ] !== b[ i ] ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * A hash table of hex numbers to avoid using toString() in uid() which is costly.\n * [ '00', '01', '02', ..., 'fe', 'ff' ]\n */\nconst HEX_NUMBERS = new Array( 256 ).fill( '' )\n\t.map( ( _, index ) => ( '0' + ( index ).toString( 16 ) ).slice( -2 ) );\n\n/**\n * Returns a unique id. The id starts with an \"e\" character and a randomly generated string of\n * 32 alphanumeric characters.\n *\n * **Note**: The characters the unique id is built from correspond to the hex number notation\n * (from \"0\" to \"9\", from \"a\" to \"f\"). In other words, each id corresponds to an \"e\" followed\n * by 16 8-bit numbers next to each other.\n *\n * @returns An unique id string.\n */\nexport function uid(): string {\n\t// Generate 4 random 32-bit numbers.\n\tconst [ r1, r2, r3, r4 ] = crypto.getRandomValues( new Uint32Array( 4 ) );\n\n\t// Make sure that id does not start with number.\n\treturn 'e' +\n\t\tHEX_NUMBERS[ r1 >> 0 & 0xFF ] +\n\t\tHEX_NUMBERS[ r1 >> 8 & 0xFF ] +\n\t\tHEX_NUMBERS[ r1 >> 16 & 0xFF ] +\n\t\tHEX_NUMBERS[ r1 >> 24 & 0xFF ] +\n\t\tHEX_NUMBERS[ r2 >> 0 & 0xFF ] +\n\t\tHEX_NUMBERS[ r2 >> 8 & 0xFF ] +\n\t\tHEX_NUMBERS[ r2 >> 16 & 0xFF ] +\n\t\tHEX_NUMBERS[ r2 >> 24 & 0xFF ] +\n\t\tHEX_NUMBERS[ r3 >> 0 & 0xFF ] +\n\t\tHEX_NUMBERS[ r3 >> 8 & 0xFF ] +\n\t\tHEX_NUMBERS[ r3 >> 16 & 0xFF ] +\n\t\tHEX_NUMBERS[ r3 >> 24 & 0xFF ] +\n\t\tHEX_NUMBERS[ r4 >> 0 & 0xFF ] +\n\t\tHEX_NUMBERS[ r4 >> 8 & 0xFF ] +\n\t\tHEX_NUMBERS[ r4 >> 16 & 0xFF ] +\n\t\tHEX_NUMBERS[ r4 >> 24 & 0xFF ];\n}\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * A utility function that removes duplicate elements from an array.\n */\nexport function uniq<A>( source: Array<A> ): Array<A> {\n\treturn Array.from( new Set( source ) );\n}\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\nimport { waitFor, type WaitForConfig } from './waitFor.js';\n\n/**\n * Waits for the provided window entry to be available. It's used mostly for waiting for the CKEditor 5 window object to be available.\n * In theory these entries should be available immediately, but in practice, they might be loaded asynchronously because browser might\n * delay execution of the script even if it's loaded synchronously.\n *\n * Function ensures that proper type declarations are present on global Window interface.\n *\n * @param entryNames The names of the window entries to wait for.\n * @param config Configuration for the function.\n * @returns A promise that resolves when the window entry is available.\n *\n * @example\n * ```ts\n * const ckeditor = await waitForWindowEntry( [ 'CKEditor' ] );\n * ```\n */\nexport async function waitForWindowEntry<\n\tN extends keyof Window,\n\tO = Window[ N ]\n>( entryNames: Array<N>, config?: WaitForConfig ): Promise<O> {\n\t// Try to pick the bundle from the window object.\n\tconst tryPickBundle = () => (\n\t\tentryNames\n\t\t\t.map( name => ( window as any )[ name ] )\n\t\t\t.filter( Boolean )[ 0 ]\n\t);\n\n\treturn waitFor<O>(\n\t\t() => {\n\t\t\tconst result = tryPickBundle();\n\n\t\t\tif ( !result ) {\n\t\t\t\tthrow new Error( `Window entry \"${ entryNames.join( ',' ) }\" not found.` );\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\tconfig\n\t);\n}\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * Filters object values using the provided filter function.\n *\n * @param obj Object to filter.\n * @param filter Function that filters the object values.\n * @returns Object with filtered values.\n *\n * @example\n * ```ts\n * const obj = {\n * \ta: 1,\n * \tb: 2\n * };\n *\n * const filteredObj = filterObjectValues( value => value > 1, obj );\n * // filteredObj is { b: 2 }\n * ```\n */\nexport function filterObjectValues<T>(\n\tobj: Record<string, T>,\n\tfilter: ( value: T, key: string ) => boolean\n): Record<string, T> {\n\tconst filteredEntries = Object\n\t\t.entries( obj )\n\t\t.filter( ( [ key, value ] ) => filter( value, key ) );\n\n\treturn Object.fromEntries( filteredEntries );\n}\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\nimport { filterObjectValues } from './filterObjectValues.js';\n\n/**\n * Removes null and undefined values from an object.\n *\n * @param obj Object to filter.\n * @returns Object with filtered values.\n * @example\n * ```ts\n * const obj = {\n * \ta: 1,\n * \tb: null,\n * \tc: undefined\n * };\n *\n * const filteredObj = filterBlankObjectValues( obj );\n * // filteredObj is { a: 1 }\n * ```\n */\nexport function filterBlankObjectValues<T>( obj: Record<string, T> ): FilterBlankRecordProperties<T> {\n\treturn filterObjectValues(\n\t\tobj,\n\t\tvalue => value !== null && value !== undefined\n\t) as FilterBlankRecordProperties<T>;\n}\n\n/**\n * Removes null and undefined values from an object.\n */\ntype FilterBlankRecordProperties<T> = Record<string, Exclude<T, null | undefined>>;\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * Maps object values using the provided mapper function.\n *\n * @param obj Object to map.\n * @param mapper Function that maps the object values.\n * @returns Object with mapped values.\n *\n * @example\n * ```ts\n * const obj = {\n * \ta: 1,\n * \tb: 2\n * };\n *\n * const mappedObj = mapObjectValues( obj, value => value * 2 );\n * // mappedObj is { a: 2, b: 4 }\n * ```\n */\nexport function mapObjectValues<T, U>(\n\tobj: Record<string, T>,\n\tmapper: ( value: T, key: string ) => U\n): Record<string, U> {\n\tconst mappedEntries = Object\n\t\t.entries( obj )\n\t\t.map( ( [ key, value ] ) => [ key, mapper( value, key ) ] as const );\n\n\treturn Object.fromEntries( mappedEntries );\n}\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\n/**\n * Removes items from an array by values.\n *\n * @param itemsToRemove Items to remove.\n * @param items Array to remove items from.\n * @returns Array without removed items.\n */\nexport function without<A>( itemsToRemove: Array<A>, items: Array<A> ): Array<A> {\n\treturn items.filter( item => !itemsToRemove.includes( item ) );\n}\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\nimport type { SemanticVersion } from '../../utils/isSemanticVersion.js';\n\n/**\n * The URL of the CKEditor CDN.\n */\nexport const CK_CDN_URL = 'https://cdn.ckeditor.com';\n\n/**\n * A version of a file on the CKEditor CDN.\n */\nexport type CKCdnVersion = SemanticVersion;\n\n/**\n * Creates a URL to a file on the CKEditor CDN.\n *\n * @param bundle The name of the bundle.\n * @param file The name of the file.\n * @param version The version of the file.\n * @returns A function that accepts the version of the file and returns the URL.\n *\n * ```ts\n * const url = createCKCdnUrl( 'classic', 'ckeditor.js', '27.0.0' );\n *\n * expect( url ).to.be.equal( 'https://cdn.ckeditor.com/classic/27.0.0/ckeditor.js' );\n * ```\n */\nexport function createCKCdnUrl( bundle: string, file: string, version: CKCdnVersion ): string {\n\treturn `${ CK_CDN_URL }/${ bundle }/${ version }/${ file }`;\n}\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\nimport type { SemanticVersion } from '../../utils/isSemanticVersion.js';\n\n/**\n * The URL of the CKBox CDN.\n */\nexport const CKBOX_CDN_URL = 'https://cdn.ckbox.io';\n\n/**\n * A version of a file on the CKBox CDN.\n */\nexport type CKBoxCdnVersion = SemanticVersion;\n\n/**\n * Creates a URL to a file on the CKBox CDN.\n *\n * @param bundle The name of the bundle.\n * @param file The name of the file.\n * @param version The version of the file.\n * @returns A function that accepts the version of the file and returns the URL.\n *\n * ```ts\n * const url = createCKBoxCdnUrl( 'ckbox', 'ckbox.js', '2.5.1' );\n *\n * expect( url ).to.be.equal( 'https://cdn.ckbox.io/ckbox/2.5.1/ckbox.js' );\n * ```\n */\nexport function createCKBoxCdnUrl( bundle: string, file: string, version: CKBoxCdnVersion ): string {\n\treturn `${ CKBOX_CDN_URL }/${ bundle }/${ version }/${ file }`;\n}\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\nexport type SemanticVersion = `${ number }.${ number }.${ number }`;\n\n/**\n * Checks if the given string is a semantic version number.\n *\n * @param version - The string to check.\n * @returns `true` if the string is a semantic version, `false` otherwise.\n */\nexport function isSemanticVersion( version: string | undefined | null ): version is SemanticVersion {\n\treturn !!version && /^\\d+\\.\\d+\\.\\d+/.test( version );\n}\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\nimport type { BundleInstallationInfo } from './types.js';\n\nimport { isSemanticVersion } from '../utils/isSemanticVersion.js';\n\n/**\n * Returns information about the base CKEditor bundle installation.\n */\nexport function getCKBaseBundleInstallationInfo(): BundleInstallationInfo | null {\n\tconst { CKEDITOR_VERSION, CKEDITOR } = window;\n\n\tif ( !isSemanticVersion( CKEDITOR_VERSION ) ) {\n\t\treturn null;\n\t}\n\n\t// Global `CKEDITOR` is set only in CDN builds.\n\treturn {\n\t\tsource: CKEDITOR ? 'cdn' : 'npm',\n\t\tversion: CKEDITOR_VERSION\n\t};\n}\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\nimport type { SemanticVersion } from '../utils/isSemanticVersion.js';\n\nexport const CK_DOCS_URL = 'https://ckeditor.com/docs/ckeditor5';\n\n/**\n * Creates a URL to a file on the CKEditor documentation.\n */\nexport function createCKDocsUrl( path: string, version: SemanticVersion | 'latest' = 'latest' ): string {\n\treturn `${ CK_DOCS_URL }/${ version }/${ path }`;\n}\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\nimport type { CKCdnResourcesAdvancedPack } from '../../cdn/utils/loadCKCdnResourcesPack.js';\n\nimport { waitForWindowEntry } from '../../utils/waitForWindowEntry.js';\nimport { injectScriptsInParallel } from '../../utils/injectScript.js';\nimport { without } from '../../utils/without.js';\n\nimport { getCKBaseBundleInstallationInfo } from '../../installation-info/getCKBaseBundleInstallationInfo.js';\nimport { createCKDocsUrl } from '../../docs/createCKDocsUrl.js';\n\nimport { createCKCdnUrl, type CKCdnVersion } from './createCKCdnUrl.js';\n\nimport './globals.js';\n\n/**\n * Creates a pack of resources for the base CKEditor bundle.\n *\n * @param config The configuration of the CKEditor Premium Features pack.\n * @returns A pack of resources for  the base CKEditor bundle.\n * @example\n *\n * ```ts\n * const { Paragraph } = await loadCKCdnResourcesPack(\n * \tcreateCKCdnBaseBundlePack( {\n * \t\tversion: '43.0.0',\n * \t\ttranslations: [ 'es', 'de' ]\n * \t} )\n * );\n * ```\n */\nexport function createCKCdnBaseBundlePack(\n\t{\n\t\tversion,\n\t\ttranslations\n\t}: CKCdnBaseBundlePackConfig\n): CKCdnResourcesAdvancedPack<Window['CKEDITOR']> {\n\tconst urls = {\n\t\tscripts: [\n\t\t\t// Load the main script of the base features.\n\t\t\tcreateCKCdnUrl( 'ckeditor5', 'ckeditor5.umd.js', version ),\n\n\t\t\t// Load all JavaScript files from the base features.\n\t\t\t// EN bundle is prebuilt into the main script, so we don't need to load it separately.\n\t\t\t...without( [ 'en' ], translations || [] ).map( translation =>\n\t\t\t\tcreateCKCdnUrl( 'ckeditor5', `translations/${ translation }.umd.js`, version )\n\t\t\t)\n\t\t],\n\n\t\tstylesheets: [\n\t\t\tcreateCKCdnUrl( 'ckeditor5', 'ckeditor5.css', version )\n\t\t]\n\t};\n\n\treturn {\n\t\t// Preload resources specified in the pack, before loading the main script.\n\t\tpreload: [\n\t\t\t...urls.stylesheets,\n\t\t\t...urls.scripts\n\t\t],\n\n\t\tscripts: [\n\t\t\t// It's safe to load translations and the main script in parallel.\n\t\t\tasync attributes => injectScriptsInParallel( urls.scripts, attributes )\n\t\t],\n\n\t\t// Load all stylesheets of the base features.\n\t\tstylesheets: urls.stylesheets,\n\n\t\t// Pick the exported global variables from the window object.\n\t\tcheckPluginLoaded: async () =>\n\t\t\twaitForWindowEntry( [ 'CKEDITOR' ] ),\n\n\t\t// Check if the CKEditor base bundle is already loaded and throw an error if it is.\n\t\tbeforeInject: () => {\n\t\t\tconst installationInfo = getCKBaseBundleInstallationInfo();\n\n\t\t\tswitch ( installationInfo?.source ) {\n\t\t\t\tcase 'npm':\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t'CKEditor 5 is already loaded from npm. Check the migration guide for more details: ' +\n\t\t\t\t\t\tcreateCKDocsUrl( 'updating/migration-to-cdn/vanilla-js.html' )\n\t\t\t\t\t);\n\n\t\t\t\tcase 'cdn':\n\t\t\t\t\tif ( installationInfo.version !== version ) {\n\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t`CKEditor 5 is already loaded from CDN in version ${ installationInfo.version }. ` +\n\t\t\t\t\t\t\t`Remove the old <script> and <link> tags loading CKEditor 5 to allow loading the ${ version } version.`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * Configuration of the base CKEditor bundle pack.\n */\nexport type CKCdnBaseBundlePackConfig = {\n\n\t/**\n\t * The version of  the base CKEditor bundle.\n\t */\n\tversion: CKCdnVersion;\n\n\t/**\n\t * The list of translations to load.\n\t */\n\ttranslations?: Array<string>;\n};\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\nimport type { CKCdnResourcesAdvancedPack } from '../../cdn/utils/loadCKCdnResourcesPack.js';\nimport type { CKCdnBaseBundlePackConfig } from './createCKCdnBaseBundlePack.js';\n\nimport { waitForWindowEntry } from '../../utils/waitForWindowEntry.js';\nimport { injectScriptsInParallel } from '../../utils/injectScript.js';\nimport { without } from '../../utils/without.js';\n\nimport { createCKCdnUrl } from './createCKCdnUrl.js';\n\n/**\n * Creates a pack of resources for the CKEditor Premium Features.\n *\n * @param config The configuration of the CKEditor Premium Features pack.\n * @returns A pack of resources for the CKEditor Premium Features.\n * @example\n *\n * ```ts\n * const { SlashCommand } = await loadCKCdnResourcesPack(\n * \tcreateCKCdnPremiumBundlePack( {\n * \t\tversion: '43.0.0',\n * \t\ttranslations: [ 'es', 'de' ]\n * \t} )\n * );\n * ```\n */\nexport function createCKCdnPremiumBundlePack(\n\t{\n\t\tversion,\n\t\ttranslations\n\t}: CKCdnPremiumBundlePackConfig\n): CKCdnResourcesAdvancedPack<Window['CKEDITOR_PREMIUM_FEATURES']> {\n\tconst urls = {\n\t\tscripts: [\n\t\t\t// Load the main script of the premium features.\n\t\t\tcreateCKCdnUrl( 'ckeditor5-premium-features', 'ckeditor5-premium-features.umd.js', version ),\n\n\t\t\t// Load all JavaScript files from the premium features.\n\t\t\t// EN bundle is prebuilt into the main script, so we don't need to load it separately.\n\t\t\t...without( [ 'en' ], translations || [] ).map( translation =>\n\t\t\t\tcreateCKCdnUrl( 'ckeditor5-premium-features', `translations/${ translation }.umd.js`, version )\n\t\t\t)\n\t\t],\n\n\t\tstylesheets: [\n\t\t\tcreateCKCdnUrl( 'ckeditor5-premium-features', 'ckeditor5-premium-features.css', version )\n\t\t]\n\t};\n\n\treturn {\n\t\t// Preload resources specified in the pack, before loading the main script.\n\t\tpreload: [\n\t\t\t...urls.stylesheets,\n\t\t\t...urls.scripts\n\t\t],\n\n\t\tscripts: [\n\t\t\t// It's safe to load translations and the main script in parallel.\n\t\t\tasync attributes => injectScriptsInParallel( urls.scripts, attributes )\n\t\t],\n\n\t\t// Load all stylesheets of the premium features.\n\t\tstylesheets: urls.stylesheets,\n\n\t\t// Pick the exported global variables from the window object.\n\t\tcheckPluginLoaded: async () =>\n\t\t\twaitForWindowEntry( [ 'CKEDITOR_PREMIUM_FEATURES' ] )\n\t};\n}\n\n/**\n * Configuration of the CKEditor Premium Features pack.\n */\nexport type CKCdnPremiumBundlePackConfig = Pick<\n\tCKCdnBaseBundlePackConfig,\n\t'translations' | 'version'\n>;\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\nimport type { Awaitable } from '../../types/Awaitable.js';\n\nimport { injectScript, type InjectScriptProps } from '../../utils/injectScript.js';\nimport { injectStylesheet } from '../../utils/injectStylesheet.js';\nimport { preloadResource } from '../../utils/preloadResource.js';\nimport { uniq } from '../../utils/uniq.js';\n\n/**\n * Loads pack of resources (scripts and stylesheets) and returns the exported global variables (if any).\n *\n * @param pack The pack of resources to load.\n * @returns A promise that resolves with the exported global variables.\n * @example\n *\n * ```ts\n * const ckeditor = await loadCKCdnResourcesPack<ClassicEditor>( {\n * \tscripts: [\n * \t\t'https://cdn.ckeditor.com/ckeditor5/30.0.0/classic/ckeditor.js'\n * \t],\n * \tcheckPluginLoaded: () => ( window as any ).ClassicEditor\n * } );\n * ```\n */\nexport async function loadCKCdnResourcesPack<P extends CKCdnResourcesPack<any>>( pack: P ): Promise<InferCKCdnResourcesPackExportsType<P>> {\n\tlet {\n\t\thtmlAttributes = {},\n\t\tscripts = [],\n\t\tstylesheets = [],\n\t\tpreload,\n\t\tbeforeInject,\n\t\tcheckPluginLoaded\n\t} = normalizeCKCdnResourcesPack( pack );\n\n\t// Execute the `beforeInject` callback if defined. It checks if the resources are already loaded.\n\tbeforeInject?.();\n\n\t// If preload is not defined, use all stylesheets and scripts as preload resources.\n\tif ( !preload ) {\n\t\tpreload = uniq( [\n\t\t\t...stylesheets.filter( item => typeof item === 'string' ),\n\t\t\t...scripts.filter( item => typeof item === 'string' )\n\t\t] );\n\t}\n\n\t// Preload resources specified in the pack.\n\tfor ( const url of preload ) {\n\t\tpreloadResource( url, {\n\t\t\tattributes: htmlAttributes\n\t\t} );\n\t}\n\n\t// Load stylesheet tags before scripts to avoid a flash of unstyled content.\n\tawait Promise.all(\n\t\tuniq( stylesheets ).map( href => injectStylesheet( {\n\t\t\thref,\n\t\t\tattributes: htmlAttributes,\n\t\t\tplacementInHead: 'start'\n\t\t} ) )\n\t);\n\n\t// Load script tags.\n\tfor ( const script of uniq( scripts ) ) {\n\t\tconst injectorProps: InjectScriptProps = {\n\t\t\tattributes: htmlAttributes\n\t\t};\n\n\t\tif ( typeof script === 'string' ) {\n\t\t\tawait injectScript( script, injectorProps );\n\t\t} else {\n\t\t\tawait script( injectorProps );\n\t\t}\n\t}\n\n\t// Wait for execution all injected scripts.\n\treturn checkPluginLoaded?.();\n}\n\n/**\n * Normalizes the CKCdnResourcesPack configuration to the advanced format.\n *\n * @param pack The pack of resources to normalize.\n * @returns The normalized pack of resources.\n */\nexport function normalizeCKCdnResourcesPack<R = any>( pack: CKCdnResourcesPack<R> ): CKCdnResourcesAdvancedPack<R> {\n\t// Check if it is array of URLs, if so, convert it to the advanced format.\n\tif ( Array.isArray( pack ) ) {\n\t\treturn {\n\t\t\tscripts: pack.filter(\n\t\t\t\titem => typeof item === 'function' || item.endsWith( '.js' )\n\t\t\t),\n\n\t\t\tstylesheets: pack.filter(\n\t\t\t\titem => item.endsWith( '.css' )\n\t\t\t)\n\t\t};\n\t}\n\n\t// Check if it is a local import function, if so, convert it to the advanced format.\n\tif ( typeof pack === 'function' ) {\n\t\treturn {\n\t\t\tcheckPluginLoaded: pack\n\t\t};\n\t}\n\n\t// Return the pack as it is, because it's already in the advanced format.\n\treturn pack;\n}\n\n/**\n * A pack of resources to load (scripts and stylesheets) and the exported global variables.\n */\nexport type CKCdnResourcesPack<R = any> =\n\t| CKCdnResourcesAdvancedPack<R>\n\t| CKCdnResourcesBasicUrlsPack\n\t| CKCdnResourcesLocalPack<R>;\n\n/**\n * A pack of resources to load as an async function that results with UMD module.\n *\n * @example\n * ```ts\n * const pack = async () => import( './your-module' );\n * ```\n */\ntype CKCdnResourcesLocalPack<R> = () => Awaitable<R>;\n\n/**\n * A pack of resources to load (scripts and stylesheets). In such configuration, the exported global variable\n * might be available but it's not guaranteed.\n *\n * @example\n * ```ts\n * const pack = [\n * \t'https://cdn.ckeditor.com/ckeditor5/30.0.0/classic/ckeditor.js'\n * ];\n * ```\n */\ntype CKCdnResourcesBasicUrlsPack = Array<string>;\n\n/**\n * A pack of resources to load (scripts and stylesheets) and the exported global variables.\n *\n * @example\n * ```ts\n * const pack = {\n * \tscripts: [\n * \t\t'https://cdn.ckeditor.com/ckeditor5/30.0.0/classic/ckeditor.js'\n * \t],\n * \tcheckPluginLoaded: () => ( window as any ).ClassicEditor\n * };\n * ```\n */\nexport type CKCdnResourcesAdvancedPack<R> = {\n\n\t/**\n\t * List of resources to preload, it should improve the performance of loading the resources.\n\t */\n\tpreload?: Array<string>;\n\n\t/**\n\t * List of scripts to load. Scripts are loaded in the order they are defined.\n\t */\n\tscripts?: Array<string | CKCdnScriptInjectorCallback>;\n\n\t/**\n\t * List of stylesheets to load. Stylesheets are loaded in the order they are defined.\n\t */\n\tstylesheets?: Array<string>;\n\n\t/**\n\t * Map of attributes to add to the script, stylesheet and link tags.\n\t * It can be used to specify `crossorigin` or `nonce` attributes on the injected HTML elements.\n\t */\n\thtmlAttributes?: Record<string, any>;\n\n\t/**\n\t * Callback that is executed before injecting the resources. It can be used to verify if the resources are already loaded.\n\t */\n\tbeforeInject?: () => void;\n\n\t/**\n\t * Get JS object with global variables exported by scripts.\n\t */\n\tcheckPluginLoaded?: () => Awaitable<R>;\n};\n\n/**\n * Callback that injects a script tag into the document.\n */\ntype CKCdnScriptInjectorCallback = ( props: InjectScriptProps ) => Awaitable<unknown> ;\n\n/**\n * Extracts the type of the exported global variables from a CKResourcesPack.\n */\nexport type InferCKCdnResourcesPackExportsType<P> = P extends CKCdnResourcesPack<infer R> ? R : never;\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\nimport { filterBlankObjectValues } from '../../utils/filterBlankObjectValues.js';\nimport { mapObjectValues } from '../../utils/mapObjectValues.js';\n\nimport {\n\tnormalizeCKCdnResourcesPack,\n\ttype CKCdnResourcesPack,\n\ttype InferCKCdnResourcesPackExportsType,\n\ttype CKCdnResourcesAdvancedPack\n} from './loadCKCdnResourcesPack.js';\n\n/**\n * Combines multiple CKEditor CDN bundles packs into a single pack.\n *\n * @param packs A map of CKEditor CDN bundles packs.\n * @returns A combined pack of resources for multiple CKEditor CDN bundles.\n * @example\n *\n * ```ts\n * const { Base, Premium } = await loadCKCdnResourcesPack(\n * \tcombineCKCdnBundlesPacks( {\n * \t\tBase: createCKCdnBaseBundlePack( {\n * \t\t\tversion: '43.0.0',\n * \t\t\ttranslations: [ 'es', 'de' ]\n * \t\t} ),\n * \t\tPremium: createCKCdnPremiumBundlePack( {\n * \t\t\tversion: '43.0.0',\n * \t\t\ttranslations: [ 'es', 'de' ]\n * \t\t} )\n * \t} )\n * );\n * ```\n */\nexport function combineCKCdnBundlesPacks<P extends CKCdnBundlesPacks>( packs: P ): CKCdnCombinedBundlePack<P> {\n\tconst normalizedPacks = mapObjectValues(\n\t\tfilterBlankObjectValues( packs ),\n\t\tnormalizeCKCdnResourcesPack\n\t);\n\n\t// Merge all scripts, stylesheets and preload resources from all packs.\n\tconst mergedPacks = Object\n\t\t.values( normalizedPacks )\n\t\t.reduce(\n\t\t\t( acc, pack ) => {\n\t\t\t\tacc.scripts!.push( ...( pack.scripts ?? [] ) );\n\t\t\t\tacc.stylesheets!.push( ...( pack.stylesheets ?? [] ) );\n\t\t\t\tacc.preload!.push( ...( pack.preload ?? [] ) );\n\n\t\t\t\treturn acc;\n\t\t\t},\n\t\t\t{\n\t\t\t\tpreload: [],\n\t\t\t\tscripts: [],\n\t\t\t\tstylesheets: []\n\t\t\t}\n\t\t);\n\n\t// Get exported entries from all packs.\n\tconst checkPluginLoaded = async () => {\n\t\t// Use Object.create() to create an object without a prototype to avoid prototype pollution.\n\t\tconst exportedGlobalVariables: Record<string, unknown> = Object.create( null );\n\n\t\t// It can be done sequentially because scripts *should* be loaded at this point and the whole execution should be quite fast.\n\t\tfor ( const [ name, pack ] of Object.entries( normalizedPacks ) ) {\n\t\t\texportedGlobalVariables[ name ] = await pack?.checkPluginLoaded?.();\n\t\t}\n\n\t\treturn exportedGlobalVariables as any;\n\t};\n\n\t// Call beforeInject method of all packs.\n\tconst beforeInject = () => {\n\t\tfor ( const pack of Object.values( normalizedPacks ) ) {\n\t\t\tpack.beforeInject?.();\n\t\t}\n\t};\n\n\treturn {\n\t\t...mergedPacks,\n\t\tbeforeInject,\n\t\tcheckPluginLoaded\n\t};\n}\n\n/**\n * A map of CKEditor CDN bundles packs.\n */\nexport type CKCdnBundlesPacks = Record<string, CKCdnResourcesPack<any> | undefined>;\n\n/**\n * A combined pack of resources for multiple CKEditor CDN bundles.\n */\nexport type CKCdnCombinedBundlePack<P extends CKCdnBundlesPacks> = CKCdnResourcesAdvancedPack<{\n\t[ K in keyof P ]: InferCKCdnResourcesPackExportsType<P[K]>\n}>;\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\nimport type { BundleInstallationInfo } from './types.js';\n\nimport { isSemanticVersion } from '../utils/isSemanticVersion.js';\n\n/**\n * Returns information about the CKBox installation.\n */\nexport function getCKBoxInstallationInfo(): BundleInstallationInfo | null {\n\tconst version = window.CKBox?.version;\n\n\tif ( !isSemanticVersion( version ) ) {\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tsource: 'cdn',\n\t\tversion\n\t};\n}\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\nimport { waitForWindowEntry } from '../../utils/waitForWindowEntry.js';\nimport { getCKBoxInstallationInfo } from '../../installation-info/getCKBoxInstallationInfo.js';\n\nimport type { CKCdnResourcesAdvancedPack } from '../../cdn/utils/loadCKCdnResourcesPack.js';\nimport { createCKBoxCdnUrl, type CKBoxCdnVersion } from './createCKBoxCdnUrl.js';\n\nimport './globals.js';\n\n/**\n * Creates a pack of resources for the base CKBox bundle.\n *\n * @param config The configuration of the CKBox bundle pack.\n * @returns A pack of resources for the base CKBox bundle.\n * @example\n * ```ts\n * const { CKBox } = await loadCKCdnResourcesPack(\n * \tcreateCKBoxCdnBundlePack( {\n * \t\tversion: '2.5.1',\n * \t\ttheme: 'lark'\n * \t} )\n * );\n * ```\n */\nexport function createCKBoxBundlePack(\n\t{\n\t\tversion,\n\t\ttheme = 'lark'\n\t}: CKBoxCdnBundlePackConfig\n): CKCdnResourcesAdvancedPack<Window['CKBox']> {\n\treturn {\n\t\t// Load the main script of the base features.\n\t\tscripts: [\n\t\t\tcreateCKBoxCdnUrl( 'ckbox', 'ckbox.js', version )\n\t\t],\n\n\t\t// Load optional theme, if provided. It's not required but recommended because it improves the look and feel.\n\t\t...theme && {\n\t\t\tstylesheets: [ createCKBoxCdnUrl( 'ckbox', `styles/themes/${ theme }.css`, version ) ]\n\t\t},\n\n\t\t// Pick the exported global variables from the window object.\n\t\tcheckPluginLoaded: async () =>\n\t\t\twaitForWindowEntry( [ 'CKBox' ] ),\n\n\t\t// Check if the CKBox bundle is already loaded and throw an error if it is.\n\t\tbeforeInject: () => {\n\t\t\tconst installationInfo = getCKBoxInstallationInfo();\n\n\t\t\tif ( installationInfo && installationInfo.version !== version ) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`CKBox is already loaded from CDN in version ${ installationInfo.version }. ` +\n\t\t\t\t\t`Remove the old <script> and <link> tags loading CKBox to allow loading the ${ version } version.`\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * Configuration of the base CKEditor bundle pack.\n */\nexport type CKBoxCdnBundlePackConfig = {\n\n\t/**\n\t * The version of  the base CKEditor bundle.\n\t */\n\tversion: CKBoxCdnVersion;\n\n\t/**\n\t * The theme of the CKBox bundle. Default is 'lark'.\n\t */\n\ttheme?: string | null;\n};\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\nimport { mapObjectValues } from '../../utils/mapObjectValues.js';\nimport { waitForWindowEntry } from '../../utils/waitForWindowEntry.js';\n\nimport {\n\tnormalizeCKCdnResourcesPack,\n\ttype InferCKCdnResourcesPackExportsType,\n\ttype CKCdnResourcesAdvancedPack\n} from '../utils/loadCKCdnResourcesPack.js';\n\nimport {\n\tcombineCKCdnBundlesPacks,\n\ttype CKCdnBundlesPacks\n} from '../utils/combineCKCdnBundlesPacks.js';\n\n/**\n * This function is similar to `combineCKCdnBundlesPacks` but it provides global scope\n * fallback for the plugins that do not define the type of the exported entries. In other\n * words if the plugin `Reader` does not define the type of the exported entries, the type\n * will be picked from the `Window[ 'Reader' ]` object.\n *\n * @param pluginsPacks A map of CKEditor plugins packs.\n * @returns A combined pack of resources for multiple CKEditor plugins.\n * @example\n *\n * ```ts\n * const { ScreenReader, AccessibilityChecker } = await loadCKCdnResourcesPack(\n * \tcombineCdnPluginsPacks( {\n * \t\tScreenReader: [ 'https://example.org/screen-reader.js' ],\n * \t\tAccessibilityChecker: [ 'https://example.org/accessibility-checker.js' ]\n * \t} )\n * );\n * ```\n *\n * In example above, `ScreenReader` and `AccessibilityChecker` are the plugins names and\n * the type of the exported entries will be picked from the global (Window) scope.\n */\nexport function combineCdnPluginsPacks<Plugins extends CdnPluginsPacks>(\n\tpluginsPacks: Plugins\n): CombinedPluginsPackWithFallbackScope<Plugins> {\n\tconst normalizedPluginsPacks = mapObjectValues( pluginsPacks, ( pluginPack, pluginName ) => {\n\t\tif ( !pluginPack ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst normalizedPluginPack = normalizeCKCdnResourcesPack( pluginPack );\n\n\t\treturn {\n\t\t\t// Provide default window accessor object if the plugin pack does not define it.\n\t\t\tcheckPluginLoaded: async (): Promise<unknown> =>\n\t\t\t\twaitForWindowEntry( [ pluginName as any ] ),\n\n\t\t\t// Transform the plugin pack to a normalized advanced pack.\n\t\t\t...normalizedPluginPack\n\t\t};\n\t} );\n\n\t// Merge all scripts, stylesheets and preload resources from all packs.\n\treturn combineCKCdnBundlesPacks(\n\t\tnormalizedPluginsPacks\n\t) as CombinedPluginsPackWithFallbackScope<Plugins>;\n}\n\n/**\n * A map of CKEditor plugins packs.\n */\nexport type CdnPluginsPacks = CKCdnBundlesPacks;\n\n/**\n * A combined pack of plugins. It picks the type of the plugin from the global scope if\n * `CKCdnCombinedBundlePack` does not define it in the `checkPluginLoaded` method.\n */\nexport type CombinedPluginsPackWithFallbackScope<P extends CdnPluginsPacks> = CKCdnResourcesAdvancedPack<{\n\t[ K in keyof P ]: FallbackIfUnknown<\n\t\tInferCKCdnResourcesPackExportsType<P[K]>,\n\t\tK extends keyof Window ? Window[ K ] : unknown\n\t>;\n}>;\n\n/**\n * Returns the fallback type if the provided type is unknown.\n */\ntype FallbackIfUnknown<T, Fallback> = unknown extends T ? Fallback : T;\n","/**\n * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n\nimport { createCKCdnBaseBundlePack } from './ck/createCKCdnBaseBundlePack.js';\nimport { createCKCdnPremiumBundlePack } from './ck/createCKCdnPremiumBundlePack.js';\n\nimport { combineCKCdnBundlesPacks } from './utils/combineCKCdnBundlesPacks.js';\nimport {\n\tcreateCKBoxBundlePack,\n\ttype CKBoxCdnBundlePackConfig\n} from './ckbox/createCKBoxCdnBundlePack.js';\n\nimport type { ConditionalBlank } from '../types/ConditionalBlank.js';\nimport type { CKCdnVersion } from './ck/createCKCdnUrl.js';\n\nimport {\n\tloadCKCdnResourcesPack,\n\ttype InferCKCdnResourcesPackExportsType\n} from './utils/loadCKCdnResourcesPack.js';\n\nimport {\n\tcombineCdnPluginsPacks,\n\ttype CombinedPluginsPackWithFallbackScope,\n\ttype CdnPluginsPacks\n} from './plugins/combineCdnPluginsPacks.js';\n\n/**\n * A composable function that loads CKEditor Cloud Services bundles.\n * It returns the exports of the loaded bundles.\n *\n * @param config The configuration of the CKEditor Cloud Services bundles to load.\n * @returns The result of the loaded CKEditor Cloud Services bundles.\n * @example\n *\n * Example of loading CKEditor Cloud Services with the premium features and CKBox:\n *\n * ```ts\n * const { CKEditor, CKEditorPremiumFeatures } = await loadCKEditorCloud( {\n * \tversion: '43.0.0',\n * \ttranslations: [ 'es', 'de' ],\n * \tpremium: true\n * } );\n *\n * const { Paragraph } = CKEditor;\n * const { SlashCommands } = CKEditorPremiumFeatures;\n * ```\n *\n * Example of loading CKEditor Cloud Services with custom plugins:\n *\n * ```ts\n * const { CKEditor, loadedPlugins } = await loadCKEditorCloud( {\n * \tversion: '43.0.0',\n * \tplugins: {\n * \t\tPlugin1: async () => import( './your-local-import.umd.js' ),\n * \t\tPlugin2: [\n * \t\t\t'https://cdn.example.com/plugin2.js',\n * \t\t\t'https://cdn.example.com/plugin2.css'\n * \t\t],\n * \t\tPlugin3: {\n * \t\t\tscripts: [ 'https://cdn.example.com/plugin3.js' ],\n * \t\t\tstylesheets: [ 'https://cdn.example.com/plugin3.css' ],\n *\n * \t\t\t// Optional, if it's not passed then the type of `Plugin3` will be picked from `Window`\n * \t\t\tcheckPluginLoaded: () => ( window as any ).Plugin3\n * \t\t}\n * \t}\n * } );\n * ```\n *\n * Type of plugins can be inferred if `checkPluginLoaded` is not provided: In this case,\n * the type of the plugin will be picked from the global window scope.\n */\nexport function loadCKEditorCloud<Config extends CKEditorCloudConfig>(\n\tconfig: Config\n): Promise<CKEditorCloudResult<Config>> {\n\tconst {\n\t\tversion, translations, plugins,\n\t\tpremium, ckbox,\n\t\tinjectedHtmlElementsAttributes = {\n\t\t\tcrossorigin: 'anonymous'\n\t\t}\n\t} = config;\n\n\tconst pack = combineCKCdnBundlesPacks( {\n\t\tCKEditor: createCKCdnBaseBundlePack( {\n\t\t\tversion,\n\t\t\ttranslations\n\t\t} ),\n\n\t\t...premium && {\n\t\t\tCKEditorPremiumFeatures: createCKCdnPremiumBundlePack( {\n\t\t\t\tversion,\n\t\t\t\ttranslations\n\t\t\t} )\n\t\t},\n\n\t\t...ckbox && {\n\t\t\tCKBox: createCKBoxBundlePack( ckbox )\n\t\t},\n\n\t\tloadedPlugins: combineCdnPluginsPacks( plugins ?? {} )\n\t} );\n\n\treturn loadCKCdnResourcesPack(\n\t\t{\n\t\t\t...pack,\n\t\t\thtmlAttributes: injectedHtmlElementsAttributes\n\t\t}\n\t) as Promise<CKEditorCloudResult<Config>>;\n}\n\n/**\n * The result of the resolved bundles from CKEditor Cloud Services.\n */\nexport type CKEditorCloudResult<Config extends CKEditorCloudConfig> = {\n\n\t/**\n\t * The base CKEditor bundle exports.\n\t */\n\tCKEditor: NonNullable<Window['CKEDITOR']>;\n\n\t/**\n\t * The CKBox bundle exports.\n\t * It's available only if the `ckbox` configuration is provided.\n\t */\n\tCKBox: ConditionalBlank<\n\t\tConfig['ckbox'],\n\t\tWindow['CKBox']\n\t>;\n\n\t/**\n\t * The CKEditor Premium Features bundle exports.\n\t * It's available only if the `premium` configuration is provided.\n\t */\n\tCKEditorPremiumFeatures: ConditionalBlank<\n\t\tConfig['premium'],\n\t\tWindow['CKEDITOR_PREMIUM_FEATURES']\n\t>;\n\n\t/**\n\t * The additional resources exports.\n\t */\n\tloadedPlugins: InferCKCdnResourcesPackExportsType<\n\t\tCombinedPluginsPackWithFallbackScope<NonNullable<Config['plugins']>>\n\t>;\n};\n\n/**\n * The configuration of the `useCKEditorCloud` hook.\n */\nexport type CKEditorCloudConfig<Plugins extends CdnPluginsPacks = CdnPluginsPacks> = {\n\n\t/**\n\t * The version of CKEditor Cloud Services to use.\n\t */\n\tversion: CKCdnVersion;\n\n\t/**\n\t * The translations to load.\n\t */\n\ttranslations?: Array<string>;\n\n\t/**\n\t * If `true` then the premium features will be loaded.\n\t */\n\tpremium?: boolean;\n\n\t/**\n\t * CKBox bundle configuration.\n\t */\n\tckbox?: CKBoxCdnBundlePackConfig;\n\n\t/**\n\t * Additional resources to load.\n\t */\n\tplugins?: Plugins;\n\n\t/**\n\t * Map of attributes to add to the script, stylesheet and link tags that are injected by the loader.\n\t */\n\tinjectedHtmlElementsAttributes?: Record<string, any>;\n};\n"],"names":[],"mappings":"AAAA;AAAA;AAAA;AAAA;AAgBO,SAAS,WAAkC,GAAA;AACjD,EAAA,MAAM,QAAqB,GAAA;AAAA,IAC1B,OAAS,EAAA,IAAA;AAAA,IACT,OAAS,EAAA,IAAA;AAAA,GACV,CAAA;AAEA,EAAS,QAAA,CAAA,OAAA,GAAU,IAAI,OAAA,CAAY,CAAW,OAAA,KAAA;AAC7C,IAAA,QAAA,CAAS,OAAU,GAAA,OAAA,CAAA;AAAA,GAClB,CAAA,CAAA;AAEF,EAAO,OAAA,QAAA,CAAA;AACR;;AC3BA;AAAA;AAAA;AAAA;AAyBO,SAAS,QACf,QACA,EAAA;AAAA,EACC,YAAe,GAAA,GAAA;AAAA,EACf,UAAa,GAAA,GAAA;AACd,CAAA,GAAmB,EACN,EAAA;AAEb,EAAA,OAAO,IAAI,OAAA,CAAY,CAAE,OAAA,EAAS,MAAY,KAAA;AAC7C,IAAM,MAAA,SAAA,GAAY,KAAK,GAAI,EAAA,CAAA;AAC3B,IAAA,IAAI,SAA0B,GAAA,IAAA,CAAA;AAE9B,IAAM,MAAA,cAAA,GAAiB,WAAY,MAAM;AACxC,MAAA,MAAA,CAAQ,SAAa,IAAA,IAAI,KAAO,CAAA,SAAU,CAAE,CAAA,CAAA;AAAA,OAC1C,YAAa,CAAA,CAAA;AAEhB,IAAA,MAAM,OAAO,YAAY;AACxB,MAAI,IAAA;AACH,QAAM,MAAA,MAAA,GAAS,MAAM,QAAS,EAAA,CAAA;AAC9B,QAAA,YAAA,CAAc,cAAe,CAAA,CAAA;AAC7B,QAAA,OAAA,CAAS,MAAO,CAAA,CAAA;AAAA,eACP,GAAW,EAAA;AACpB,QAAY,SAAA,GAAA,GAAA,CAAA;AAEZ,QAAA,IAAK,IAAK,CAAA,GAAA,EAAQ,GAAA,SAAA,GAAY,YAAe,EAAA;AAC5C,UAAA,MAAA,CAAQ,GAAI,CAAA,CAAA;AAAA,SACN,MAAA;AACN,UAAA,UAAA,CAAY,MAAM,UAAW,CAAA,CAAA;AAAA,SAC9B;AAAA,OACD;AAAA,KACD,CAAA;AAEA,IAAK,IAAA,EAAA,CAAA;AAAA,GACJ,CAAA,CAAA;AACH;;AC3DA;AAAA;AAAA;AAAA;AASa,MAAA,gBAAA,uBAAuB,GAA2B,GAAA;AAUxD,SAAS,aACf,GACA,EAAA,EAAE,UAAW,EAAA,GAAuB,EACpB,EAAA;AAEhB,EAAK,IAAA,gBAAA,CAAiB,GAAK,CAAA,GAAI,CAAI,EAAA;AAClC,IAAO,OAAA,gBAAA,CAAiB,IAAK,GAAI,CAAA,CAAA;AAAA,GAClC;AAIA,EAAA,MAAM,eAAkB,GAAA,QAAA,CAAS,aAAe,CAAA,CAAA,YAAA,EAAgB,GAAI,CAAK,EAAA,CAAA,CAAA,CAAA;AAEzE,EAAA,IAAK,eAAkB,EAAA;AACtB,IAAQ,OAAA,CAAA,IAAA,CAAM,CAAiB,aAAA,EAAA,GAAI,CAAmC,gCAAA,CAAA,CAAA,CAAA;AACtE,IAAA,eAAA,CAAgB,MAAO,EAAA,CAAA;AAAA,GACxB;AAGA,EAAA,MAAM,OAAU,GAAA,IAAI,OAAe,CAAA,CAAE,SAAS,MAAY,KAAA;AACzD,IAAM,MAAA,MAAA,GAAS,QAAS,CAAA,aAAA,CAAe,QAAS,CAAA,CAAA;AAEhD,IAAA,MAAA,CAAO,OAAU,GAAA,MAAA,CAAA;AACjB,IAAA,MAAA,CAAO,SAAS,MAAM;AACrB,MAAQ,OAAA,EAAA,CAAA;AAAA,KACT,CAAA;AAGA,IAAY,KAAA,MAAA,CAAE,KAAK,KAAM,CAAA,IAAK,OAAO,OAAS,CAAA,UAAA,IAAc,EAAG,CAAI,EAAA;AAClE,MAAO,MAAA,CAAA,YAAA,CAAc,KAAK,KAAM,CAAA,CAAA;AAAA,KACjC;AAEA,IAAO,MAAA,CAAA,YAAA,CAAc,oBAAoB,sBAAuB,CAAA,CAAA;AAEhE,IAAA,MAAA,CAAO,IAAO,GAAA,iBAAA,CAAA;AACd,IAAA,MAAA,CAAO,KAAQ,GAAA,IAAA,CAAA;AACf,IAAA,MAAA,CAAO,GAAM,GAAA,GAAA,CAAA;AAEb,IAAS,QAAA,CAAA,IAAA,CAAK,YAAa,MAAO,CAAA,CAAA;AAGlC,IAAM,MAAA,QAAA,GAAW,IAAI,gBAAA,CAAkB,CAAa,SAAA,KAAA;AACnD,MAAM,MAAA,YAAA,GAAe,UAAU,OAAS,CAAA,CAAA,QAAA,KAAY,MAAM,IAAM,CAAA,QAAA,CAAS,YAAa,CAAE,CAAA,CAAA;AAExF,MAAK,IAAA,YAAA,CAAa,QAAU,CAAA,MAAO,CAAI,EAAA;AACtC,QAAA,gBAAA,CAAiB,OAAQ,GAAI,CAAA,CAAA;AAC7B,QAAA,QAAA,CAAS,UAAW,EAAA,CAAA;AAAA,OACrB;AAAA,KACC,CAAA,CAAA;AAEF,IAAS,QAAA,CAAA,OAAA,CAAS,SAAS,IAAM,EAAA;AAAA,MAChC,SAAW,EAAA,IAAA;AAAA,MACX,OAAS,EAAA,IAAA;AAAA,KACR,CAAA,CAAA;AAAA,GACD,CAAA,CAAA;AAEF,EAAiB,gBAAA,CAAA,GAAA,CAAK,KAAK,OAAQ,CAAA,CAAA;AAEnC,EAAO,OAAA,OAAA,CAAA;AACR,CAAA;AAgBsB,eAAA,uBAAA,CAAyB,SAAwB,KAA2C,EAAA;AACjH,EAAA,MAAM,OAAQ,CAAA,GAAA;AAAA,IACb,QAAQ,GAAK,CAAA,CAAA,GAAA,KAAO,YAAc,CAAA,GAAA,EAAK,KAAM,CAAE,CAAA;AAAA,GAChD,CAAA;AACD;;AClGA;AAAA;AAAA;AAAA;AASa,MAAA,oBAAA,uBAA2B,GAA2B,GAAA;AAU5D,SAAS,gBACf,CAAA;AAAA,EACC,IAAA;AAAA,EACA,eAAkB,GAAA,OAAA;AAAA,EAClB,aAAa,EAAC;AACf,CACgB,EAAA;AAEhB,EAAK,IAAA,oBAAA,CAAqB,GAAK,CAAA,IAAK,CAAI,EAAA;AACvC,IAAO,OAAA,oBAAA,CAAqB,IAAK,IAAK,CAAA,CAAA;AAAA,GACvC;AAIA,EAAA,MAAM,mBAAsB,GAAA,QAAA,CAAS,aAAe,CAAA,CAAA,WAAA,EAAe,IAAK,CAAuB,oBAAA,CAAA,CAAA,CAAA;AAE/F,EAAA,IAAK,mBAAsB,EAAA;AAC1B,IAAQ,OAAA,CAAA,IAAA,CAAM,CAAqB,iBAAA,EAAA,IAAK,CAAoC,iCAAA,CAAA,CAAA,CAAA;AAC5E,IAAA,mBAAA,CAAoB,MAAO,EAAA,CAAA;AAAA,GAC5B;AAGA,EAAM,MAAA,mBAAA,GAAsB,CAAE,IAA2B,KAAA;AAIxD,IAAA,MAAM,0BAA0B,KAAM,CAAA,IAAA;AAAA,MACrC,QAAA,CAAS,IAAK,CAAA,gBAAA,CAAkB,+CAAgD,CAAA;AAAA,KACjF,CAAA;AAEA,IAAA,QAAS,eAAkB;AAAA,MAG1B,KAAK,OAAA;AACJ,QAAA,IAAK,wBAAwB,MAAS,EAAA;AACrC,UAAA,uBAAA,CAAwB,MAAO,CAAG,CAAA,CAAA,CAAG,CAAE,CAAA,CAAE,MAAO,IAAK,CAAA,CAAA;AAAA,SAC/C,MAAA;AACN,UAAA,QAAA,CAAS,IAAK,CAAA,YAAA,CAAc,IAAM,EAAA,QAAA,CAAS,KAAK,UAAW,CAAA,CAAA;AAAA,SAC5D;AACA,QAAA,MAAA;AAAA,MAGD,KAAK,KAAA;AACJ,QAAS,QAAA,CAAA,IAAA,CAAK,YAAa,IAAK,CAAA,CAAA;AAChC,QAAA,MAAA;AAAA,KACF;AAAA,GACD,CAAA;AAGA,EAAA,MAAM,OAAU,GAAA,IAAI,OAAe,CAAA,CAAE,SAAS,MAAY,KAAA;AACzD,IAAM,MAAA,IAAA,GAAO,QAAS,CAAA,aAAA,CAAe,MAAO,CAAA,CAAA;AAG5C,IAAY,KAAA,MAAA,CAAE,KAAK,KAAM,CAAA,IAAK,OAAO,OAAS,CAAA,UAAA,IAAc,EAAG,CAAI,EAAA;AAClE,MAAK,IAAA,CAAA,YAAA,CAAc,KAAK,KAAM,CAAA,CAAA;AAAA,KAC/B;AAEA,IAAK,IAAA,CAAA,YAAA,CAAc,oBAAoB,sBAAuB,CAAA,CAAA;AAE9D,IAAA,IAAA,CAAK,GAAM,GAAA,YAAA,CAAA;AACX,IAAA,IAAA,CAAK,IAAO,GAAA,IAAA,CAAA;AAEZ,IAAA,IAAA,CAAK,OAAU,GAAA,MAAA,CAAA;AACf,IAAA,IAAA,CAAK,SAAS,MAAM;AACnB,MAAQ,OAAA,EAAA,CAAA;AAAA,KACT,CAAA;AAEA,IAAA,mBAAA,CAAqB,IAAK,CAAA,CAAA;AAG1B,IAAM,MAAA,QAAA,GAAW,IAAI,gBAAA,CAAkB,CAAa,SAAA,KAAA;AACnD,MAAM,MAAA,YAAA,GAAe,UAAU,OAAS,CAAA,CAAA,QAAA,KAAY,MAAM,IAAM,CAAA,QAAA,CAAS,YAAa,CAAE,CAAA,CAAA;AAExF,MAAK,IAAA,YAAA,CAAa,QAAU,CAAA,IAAK,CAAI,EAAA;AACpC,QAAA,oBAAA,CAAqB,OAAQ,IAAK,CAAA,CAAA;AAClC,QAAA,QAAA,CAAS,UAAW,EAAA,CAAA;AAAA,OACrB;AAAA,KACC,CAAA,CAAA;AAEF,IAAS,QAAA,CAAA,OAAA,CAAS,SAAS,IAAM,EAAA;AAAA,MAChC,SAAW,EAAA,IAAA;AAAA,MACX,OAAS,EAAA,IAAA;AAAA,KACR,CAAA,CAAA;AAAA,GACD,CAAA,CAAA;AAEF,EAAqB,oBAAA,CAAA,GAAA,CAAK,MAAM,OAAQ,CAAA,CAAA;AAExC,EAAO,OAAA,OAAA,CAAA;AACR;;AC3GA;AAAA;AAAA;AAAA;AAKO,SAAS,KAAiB,GAAA;AAChC,EAAA,OAAO,OAAO,MAAW,KAAA,WAAA,CAAA;AAC1B;;ACPA;AAAA;AAAA;AAAA;AAQO,SAAS,KAAsC,EAA+C,EAAA;AACpG,EAAA,IAAI,UAAoC,GAAA,IAAA,CAAA;AAExC,EAAA,OAAO,IAAK,IAAgB,KAAA;AAC3B,IAAA,IAAK,CAAC,UAAa,EAAA;AAClB,MAAa,UAAA,GAAA;AAAA,QACZ,OAAA,EAAS,EAAI,CAAA,GAAG,IAAK,CAAA;AAAA,OACtB,CAAA;AAAA,KACD;AAEA,IAAA,OAAO,UAAW,CAAA,OAAA,CAAA;AAAA,GACnB,CAAA;AACD;;ACpBA;AAAA;AAAA;AAAA;AAQgB,SAAA,cAAA,CAAsC,QAAW,WAAoB,EAAA;AACpF,EAAA,WAAA,CAAY,MAAS,GAAA,CAAA,CAAA;AACrB,EAAY,WAAA,CAAA,IAAA,CAAM,GAAG,MAAO,CAAA,CAAA;AAE5B,EAAO,OAAA,WAAA,CAAA;AACR;;ACbA;AAAA;AAAA;AAAA;AAQgB,SAAA,eAAA,CAAgD,QAAW,WAAoB,EAAA;AAC9F,EAAA,KAAA,MAAY,IAAQ,IAAA,MAAA,CAAO,mBAAqB,CAAA,WAAY,CAAI,EAAA;AAC/D,IAAA,OAAO,YAAa,IAAK,CAAA,CAAA;AAAA,GAC1B;AAGA,EAAA,KAAA,MAAY,CAAE,GAAK,EAAA,KAAM,KAAK,MAAO,CAAA,OAAA,CAAS,MAAO,CAAI,EAAA;AACxD,IAAA,IAAK,KAAU,KAAA,WAAA,IAAe,GAAQ,KAAA,WAAA,IAAe,QAAQ,WAAc,EAAA;AAC1E,MAAE,WAAA,CAAsB,GAAI,CAAI,GAAA,KAAA,CAAA;AAAA,KACjC;AAAA,GACD;AAEA,EAAO,OAAA,WAAA,CAAA;AACR;;ACrBA;AAAA;AAAA;AAAA;AAeO,SAAS,gBACf,GACA,EAAA,EAAE,UAAW,EAAA,GAA0B,EAChC,EAAA;AACP,EAAA,IAAK,SAAS,IAAK,CAAA,aAAA,CAAe,CAAe,WAAA,EAAA,GAAI,mBAAoB,CAAI,EAAA;AAC5E,IAAA,OAAA;AAAA,GACD;AAEA,EAAM,MAAA,IAAA,GAAO,QAAS,CAAA,aAAA,CAAe,MAAO,CAAA,CAAA;AAG5C,EAAY,KAAA,MAAA,CAAE,KAAK,KAAM,CAAA,IAAK,OAAO,OAAS,CAAA,UAAA,IAAc,EAAG,CAAI,EAAA;AAClE,IAAK,IAAA,CAAA,YAAA,CAAc,KAAK,KAAM,CAAA,CAAA;AAAA,GAC/B;AAEA,EAAK,IAAA,CAAA,YAAA,CAAc,oBAAoB,sBAAuB,CAAA,CAAA;AAE9D,EAAA,IAAA,CAAK,GAAM,GAAA,SAAA,CAAA;AACX,EAAK,IAAA,CAAA,EAAA,GAAK,qBAAsB,GAAI,CAAA,CAAA;AACpC,EAAA,IAAA,CAAK,IAAO,GAAA,GAAA,CAAA;AAEZ,EAAA,QAAA,CAAS,IAAK,CAAA,YAAA,CAAc,IAAM,EAAA,QAAA,CAAS,KAAK,UAAW,CAAA,CAAA;AAC5D,CAAA;AAYA,SAAS,qBAAsB,GAAsB,EAAA;AACpD,EAAA,QAAS,IAAO;AAAA,IACf,KAAK,QAAS,CAAA,IAAA,CAAM,GAAI,CAAA;AACvB,MAAO,OAAA,OAAA,CAAA;AAAA,IAER,KAAK,OAAQ,CAAA,IAAA,CAAM,GAAI,CAAA;AACtB,MAAO,OAAA,QAAA,CAAA;AAAA,IAER;AACC,MAAO,OAAA,OAAA,CAAA;AAAA,GACT;AACD;;AC5DA;AAAA;AAAA;AAAA;AAQgB,SAAA,oBAAA,CACf,GACA,CACU,EAAA;AACV,EAAA,IAAK,MAAM,CAAI,EAAA;AACd,IAAO,OAAA,IAAA,CAAA;AAAA,GACR;AAEA,EAAK,IAAA,CAAC,CAAK,IAAA,CAAC,CAAI,EAAA;AACf,IAAO,OAAA,KAAA,CAAA;AAAA,GACR;AAEA,EAAA,KAAA,IAAU,IAAI,CAAG,EAAA,CAAA,GAAI,CAAE,CAAA,MAAA,EAAQ,EAAE,CAAI,EAAA;AACpC,IAAA,IAAK,CAAG,CAAA,CAAE,CAAM,KAAA,CAAA,CAAG,CAAE,CAAI,EAAA;AACxB,MAAO,OAAA,KAAA,CAAA;AAAA,KACR;AAAA,GACD;AAEA,EAAO,OAAA,IAAA,CAAA;AACR;;AC3BA;AAAA;AAAA;AAAA;AASA,MAAM,cAAc,IAAI,KAAA,CAAO,GAAI,CAAE,CAAA,IAAA,CAAM,EAAG,CAC5C,CAAA,GAAA,CAAK,CAAE,CAAG,EAAA,KAAA,KAAA,CAAa,MAAQ,KAAQ,CAAA,QAAA,CAAU,EAAG,CAAI,EAAA,KAAA,CAAO,EAAG,CAAE,CAAA,CAAA;AAY/D,SAAS,GAAc,GAAA;AAE7B,EAAM,MAAA,CAAE,EAAI,EAAA,EAAA,EAAI,EAAI,EAAA,EAAG,CAAI,GAAA,MAAA,CAAO,eAAiB,CAAA,IAAI,WAAa,CAAA,CAAE,CAAE,CAAA,CAAA;AAGxE,EAAA,OAAO,MACN,WAAa,CAAA,EAAA,IAAM,CAAI,GAAA,GAAK,IAC5B,WAAa,CAAA,EAAA,IAAM,CAAI,GAAA,GAAK,IAC5B,WAAa,CAAA,EAAA,IAAM,EAAK,GAAA,GAAK,IAC7B,WAAa,CAAA,EAAA,IAAM,EAAK,GAAA,GAAK,IAC7B,WAAa,CAAA,EAAA,IAAM,CAAI,GAAA,GAAK,IAC5B,WAAa,CAAA,EAAA,IAAM,CAAI,GAAA,GAAK,IAC5B,WAAa,CAAA,EAAA,IAAM,KAAK,GAAK,CAAA,GAC7B,YAAa,EAAM,IAAA,EAAA,GAAK,GAAK,CAAA,GAC7B,YAAa,EAAM,IAAA,CAAA,GAAI,GAAK,CAAA,GAC5B,YAAa,EAAM,IAAA,CAAA,GAAI,GAAK,CAAA,GAC5B,YAAa,EAAM,IAAA,EAAA,GAAK,GAAK,CAC7B,GAAA,WAAA,CAAa,MAAM,EAAK,GAAA,GAAK,CAC7B,GAAA,WAAA,CAAa,MAAM,CAAI,GAAA,GAAK,CAC5B,GAAA,WAAA,CAAa,MAAM,CAAI,GAAA,GAAK,CAC5B,GAAA,WAAA,CAAa,MAAM,EAAK,GAAA,GAAK,IAC7B,WAAa,CAAA,EAAA,IAAM,KAAK,GAAK,CAAA,CAAA;AAC/B;;AC5CA;AAAA;AAAA;AAAA;AAQO,SAAS,KAAS,MAA6B,EAAA;AACrD,EAAA,OAAO,KAAM,CAAA,IAAA,CAAM,IAAI,GAAA,CAAK,MAAO,CAAE,CAAA,CAAA;AACtC;;ACVA;AAAA;AAAA;AAAA;AAuBsB,eAAA,kBAAA,CAGnB,YAAsB,MAAqC,EAAA;AAE7D,EAAA,MAAM,aAAgB,GAAA,MACrB,UACE,CAAA,GAAA,CAAK,CAAU,IAAA,KAAA,MAAA,CAAiB,IAAK,CAAE,CACvC,CAAA,MAAA,CAAQ,OAAQ,CAAA,CAAG,CAAE,CAAA,CAAA;AAGxB,EAAO,OAAA,OAAA;AAAA,IACN,MAAM;AACL,MAAA,MAAM,SAAS,aAAc,EAAA,CAAA;AAE7B,MAAA,IAAK,CAAC,MAAS,EAAA;AACd,QAAA,MAAM,IAAI,KAAO,CAAA,CAAA,cAAA,EAAkB,WAAW,IAAM,CAAA,GAAI,CAAE,CAAe,YAAA,CAAA,CAAA,CAAA;AAAA,OAC1E;AAEA,MAAO,OAAA,MAAA,CAAA;AAAA,KACR;AAAA,IACA,MAAA;AAAA,GACD,CAAA;AACD;;AC9CA;AAAA;AAAA;AAAA;AAuBgB,SAAA,kBAAA,CACf,KACA,MACoB,EAAA;AACpB,EAAA,MAAM,eAAkB,GAAA,MAAA,CACtB,OAAS,CAAA,GAAI,EACb,MAAQ,CAAA,CAAE,CAAE,GAAA,EAAK,KAAM,CAAA,KAAO,MAAQ,CAAA,KAAA,EAAO,GAAI,CAAE,CAAA,CAAA;AAErD,EAAO,OAAA,MAAA,CAAO,YAAa,eAAgB,CAAA,CAAA;AAC5C;;AChCA;AAAA;AAAA;AAAA;AAwBO,SAAS,wBAA4B,GAAyD,EAAA;AACpG,EAAO,OAAA,kBAAA;AAAA,IACN,GAAA;AAAA,IACA,CAAA,KAAA,KAAS,KAAU,KAAA,IAAA,IAAQ,KAAU,KAAA,KAAA,CAAA;AAAA,GACtC,CAAA;AACD;;AC7BA;AAAA;AAAA;AAAA;AAuBgB,SAAA,eAAA,CACf,KACA,MACoB,EAAA;AACpB,EAAA,MAAM,gBAAgB,MACpB,CAAA,OAAA,CAAS,GAAI,CAAA,CACb,IAAK,CAAE,CAAE,GAAK,EAAA,KAAM,MAAO,CAAE,GAAA,EAAK,OAAQ,KAAO,EAAA,GAAI,CAAE,CAAW,CAAA,CAAA;AAEpE,EAAO,OAAA,MAAA,CAAO,YAAa,aAAc,CAAA,CAAA;AAC1C;;AChCA;AAAA;AAAA;AAAA;AAYgB,SAAA,OAAA,CAAY,eAAyB,KAA4B,EAAA;AAChF,EAAA,OAAO,MAAM,MAAQ,CAAA,CAAA,IAAA,KAAQ,CAAC,aAAc,CAAA,QAAA,CAAU,IAAK,CAAE,CAAA,CAAA;AAC9D;;ACdA;AAAA;AAAA;AAAA;AAUO,MAAM,UAAa,GAAA,2BAAA;AAqBV,SAAA,cAAA,CAAgB,MAAgB,EAAA,IAAA,EAAc,OAAgC,EAAA;AAC7F,EAAA,OAAO,GAAI,UAAW,CAAA,CAAA,EAAK,MAAO,CAAK,CAAA,EAAA,OAAQ,IAAK,IAAK,CAAA,CAAA,CAAA;AAC1D;;ACjCA;AAAA;AAAA;AAAA;AAUO,MAAM,aAAgB,GAAA,uBAAA;AAqBb,SAAA,iBAAA,CAAmB,MAAgB,EAAA,IAAA,EAAc,OAAmC,EAAA;AACnG,EAAA,OAAO,GAAI,aAAc,CAAA,CAAA,EAAK,MAAO,CAAK,CAAA,EAAA,OAAQ,IAAK,IAAK,CAAA,CAAA,CAAA;AAC7D;;ACjCA;AAAA;AAAA;AAAA;AAaO,SAAS,kBAAmB,OAAiE,EAAA;AACnG,EAAA,OAAO,CAAC,CAAC,OAAW,IAAA,gBAAA,CAAiB,KAAM,OAAQ,CAAA,CAAA;AACpD;;ACfA;AAAA;AAAA;AAAA;AAYO,SAAS,+BAAiE,GAAA;AAChF,EAAM,MAAA,EAAE,gBAAkB,EAAA,QAAA,EAAa,GAAA,MAAA,CAAA;AAEvC,EAAK,IAAA,CAAC,iBAAmB,CAAA,gBAAiB,CAAI,EAAA;AAC7C,IAAO,OAAA,IAAA,CAAA;AAAA,GACR;AAGA,EAAO,OAAA;AAAA,IACN,MAAA,EAAQ,WAAW,KAAQ,GAAA,KAAA;AAAA,IAC3B,OAAS,EAAA,gBAAA;AAAA,GACV,CAAA;AACD;;ACxBA;AAAA;AAAA;AAAA;AAOO,MAAM,WAAc,GAAA,qCAAA,CAAA;AAKX,SAAA,eAAA,CAAiB,IAAc,EAAA,OAAA,GAAsC,QAAmB,EAAA;AACvG,EAAA,OAAO,CAAI,EAAA,WAAY,CAAK,CAAA,EAAA,OAAQ,IAAK,IAAK,CAAA,CAAA,CAAA;AAC/C;;ACdA;AAAA;AAAA;AAAA;AAkCO,SAAS,yBACf,CAAA;AAAA,EACC,OAAA;AAAA,EACA,YAAA;AACD,CACiD,EAAA;AACjD,EAAA,MAAM,IAAO,GAAA;AAAA,IACZ,OAAS,EAAA;AAAA;AAAA,MAER,cAAA,CAAgB,WAAa,EAAA,kBAAA,EAAoB,OAAQ,CAAA;AAAA;AAAA;AAAA,MAIzD,GAAG,QAAS,CAAE,IAAK,GAAG,YAAgB,IAAA,EAAG,CAAE,CAAA,GAAA;AAAA,QAAK,iBAC/C,cAAgB,CAAA,WAAA,EAAa,CAAiB,aAAA,EAAA,WAAY,WAAW,OAAQ,CAAA;AAAA,OAC9E;AAAA,KACD;AAAA,IAEA,WAAa,EAAA;AAAA,MACZ,cAAA,CAAgB,WAAa,EAAA,eAAA,EAAiB,OAAQ,CAAA;AAAA,KACvD;AAAA,GACD,CAAA;AAEA,EAAO,OAAA;AAAA;AAAA,IAEN,OAAS,EAAA;AAAA,MACR,GAAG,IAAK,CAAA,WAAA;AAAA,MACR,GAAG,IAAK,CAAA,OAAA;AAAA,KACT;AAAA,IAEA,OAAS,EAAA;AAAA;AAAA,MAER,OAAM,UAAA,KAAc,uBAAyB,CAAA,IAAA,CAAK,SAAS,UAAW,CAAA;AAAA,KACvE;AAAA;AAAA,IAGA,aAAa,IAAK,CAAA,WAAA;AAAA;AAAA,IAGlB,iBAAmB,EAAA,YAClB,kBAAoB,CAAA,CAAE,UAAW,CAAE,CAAA;AAAA;AAAA,IAGpC,cAAc,MAAM;AACnB,MAAA,MAAM,mBAAmB,+BAAgC,EAAA,CAAA;AAEzD,MAAA,QAAS,kBAAkB,MAAS;AAAA,QACnC,KAAK,KAAA;AACJ,UAAA,MAAM,IAAI,KAAA;AAAA,YACT,qFAAA,GACA,gBAAiB,2CAA4C,CAAA;AAAA,WAC9D,CAAA;AAAA,QAED,KAAK,KAAA;AACJ,UAAK,IAAA,gBAAA,CAAiB,YAAY,OAAU,EAAA;AAC3C,YAAA,MAAM,IAAI,KAAA;AAAA,cACT,CAAqD,iDAAA,EAAA,gBAAA,CAAiB,OAAQ,CAAA,kFAAA,EACM,OAAQ,CAAA,SAAA,CAAA;AAAA,aAC7F,CAAA;AAAA,WACD;AAEA,UAAA,MAAA;AAAA,OACF;AAAA,KACD;AAAA,GACD,CAAA;AACD;;ACnGA;AAAA;AAAA;AAAA;AA8BO,SAAS,4BACf,CAAA;AAAA,EACC,OAAA;AAAA,EACA,YAAA;AACD,CACkE,EAAA;AAClE,EAAA,MAAM,IAAO,GAAA;AAAA,IACZ,OAAS,EAAA;AAAA;AAAA,MAER,cAAA,CAAgB,4BAA8B,EAAA,mCAAA,EAAqC,OAAQ,CAAA;AAAA;AAAA;AAAA,MAI3F,GAAG,QAAS,CAAE,IAAK,GAAG,YAAgB,IAAA,EAAG,CAAE,CAAA,GAAA;AAAA,QAAK,iBAC/C,cAAgB,CAAA,4BAAA,EAA8B,CAAiB,aAAA,EAAA,WAAY,WAAW,OAAQ,CAAA;AAAA,OAC/F;AAAA,KACD;AAAA,IAEA,WAAa,EAAA;AAAA,MACZ,cAAA,CAAgB,4BAA8B,EAAA,gCAAA,EAAkC,OAAQ,CAAA;AAAA,KACzF;AAAA,GACD,CAAA;AAEA,EAAO,OAAA;AAAA;AAAA,IAEN,OAAS,EAAA;AAAA,MACR,GAAG,IAAK,CAAA,WAAA;AAAA,MACR,GAAG,IAAK,CAAA,OAAA;AAAA,KACT;AAAA,IAEA,OAAS,EAAA;AAAA;AAAA,MAER,OAAM,UAAA,KAAc,uBAAyB,CAAA,IAAA,CAAK,SAAS,UAAW,CAAA;AAAA,KACvE;AAAA;AAAA,IAGA,aAAa,IAAK,CAAA,WAAA;AAAA;AAAA,IAGlB,iBAAmB,EAAA,YAClB,kBAAoB,CAAA,CAAE,2BAA4B,CAAE,CAAA;AAAA,GACtD,CAAA;AACD;;ACxEA;AAAA;AAAA;AAAA;AA4BA,eAAsB,uBAA2D,IAA0D,EAAA;AAC1I,EAAI,IAAA;AAAA,IACH,iBAAiB,EAAC;AAAA,IAClB,UAAU,EAAC;AAAA,IACX,cAAc,EAAC;AAAA,IACf,OAAA;AAAA,IACA,YAAA;AAAA,IACA,iBAAA;AAAA,GACD,GAAI,4BAA6B,IAAK,CAAA,CAAA;AAGtC,EAAe,YAAA,IAAA,CAAA;AAGf,EAAA,IAAK,CAAC,OAAU,EAAA;AACf,IAAA,OAAA,GAAU,IAAM,CAAA;AAAA,MACf,GAAG,WAAY,CAAA,MAAA,CAAQ,CAAQ,IAAA,KAAA,OAAO,SAAS,QAAS,CAAA;AAAA,MACxD,GAAG,OAAQ,CAAA,MAAA,CAAQ,CAAQ,IAAA,KAAA,OAAO,SAAS,QAAS,CAAA;AAAA,KACnD,CAAA,CAAA;AAAA,GACH;AAGA,EAAA,KAAA,MAAY,OAAO,OAAU,EAAA;AAC5B,IAAA,eAAA,CAAiB,GAAK,EAAA;AAAA,MACrB,UAAY,EAAA,cAAA;AAAA,KACX,CAAA,CAAA;AAAA,GACH;AAGA,EAAA,MAAM,OAAQ,CAAA,GAAA;AAAA,IACb,IAAM,CAAA,WAAY,CAAE,CAAA,GAAA,CAAK,UAAQ,gBAAkB,CAAA;AAAA,MAClD,IAAA;AAAA,MACA,UAAY,EAAA,cAAA;AAAA,MACZ,eAAiB,EAAA,OAAA;AAAA,KAChB,CAAE,CAAA;AAAA,GACL,CAAA;AAGA,EAAY,KAAA,MAAA,MAAA,IAAU,IAAM,CAAA,OAAQ,CAAI,EAAA;AACvC,IAAA,MAAM,aAAmC,GAAA;AAAA,MACxC,UAAY,EAAA,cAAA;AAAA,KACb,CAAA;AAEA,IAAK,IAAA,OAAO,WAAW,QAAW,EAAA;AACjC,MAAM,MAAA,YAAA,CAAc,QAAQ,aAAc,CAAA,CAAA;AAAA,KACpC,MAAA;AACN,MAAA,MAAM,OAAQ,aAAc,CAAA,CAAA;AAAA,KAC7B;AAAA,GACD;AAGA,EAAA,OAAO,iBAAoB,IAAA,CAAA;AAC5B,CAAA;AAQO,SAAS,4BAAsC,IAA6D,EAAA;AAElH,EAAK,IAAA,KAAA,CAAM,OAAS,CAAA,IAAK,CAAI,EAAA;AAC5B,IAAO,OAAA;AAAA,MACN,SAAS,IAAK,CAAA,MAAA;AAAA,QACb,UAAQ,OAAO,IAAA,KAAS,UAAc,IAAA,IAAA,CAAK,SAAU,KAAM,CAAA;AAAA,OAC5D;AAAA,MAEA,aAAa,IAAK,CAAA,MAAA;AAAA,QACjB,CAAA,IAAA,KAAQ,IAAK,CAAA,QAAA,CAAU,MAAO,CAAA;AAAA,OAC/B;AAAA,KACD,CAAA;AAAA,GACD;AAGA,EAAK,IAAA,OAAO,SAAS,UAAa,EAAA;AACjC,IAAO,OAAA;AAAA,MACN,iBAAmB,EAAA,IAAA;AAAA,KACpB,CAAA;AAAA,GACD;AAGA,EAAO,OAAA,IAAA,CAAA;AACR;;AC/GA;AAAA;AAAA;AAAA;AAqCO,SAAS,yBAAuD,KAAuC,EAAA;AAC7G,EAAA,MAAM,eAAkB,GAAA,eAAA;AAAA,IACvB,wBAAyB,KAAM,CAAA;AAAA,IAC/B,2BAAA;AAAA,GACD,CAAA;AAGA,EAAA,MAAM,WAAc,GAAA,MAAA,CAClB,MAAQ,CAAA,eAAgB,CACxB,CAAA,MAAA;AAAA,IACA,CAAE,KAAK,IAAU,KAAA;AAChB,MAAA,GAAA,CAAI,QAAS,IAAM,CAAA,GAAK,IAAK,CAAA,OAAA,IAAW,EAAK,CAAA,CAAA;AAC7C,MAAA,GAAA,CAAI,YAAa,IAAM,CAAA,GAAK,IAAK,CAAA,WAAA,IAAe,EAAK,CAAA,CAAA;AACrD,MAAA,GAAA,CAAI,QAAS,IAAM,CAAA,GAAK,IAAK,CAAA,OAAA,IAAW,EAAK,CAAA,CAAA;AAE7C,MAAO,OAAA,GAAA,CAAA;AAAA,KACR;AAAA,IACA;AAAA,MACC,SAAS,EAAC;AAAA,MACV,SAAS,EAAC;AAAA,MACV,aAAa,EAAC;AAAA,KACf;AAAA,GACD,CAAA;AAGD,EAAA,MAAM,oBAAoB,YAAY;AAErC,IAAM,MAAA,uBAAA,mBAA0D,MAAA,CAAA,MAAA,CAAQ,IAAK,CAAA,CAAA;AAG7E,IAAA,KAAA,MAAY,CAAE,IAAM,EAAA,IAAK,KAAK,MAAO,CAAA,OAAA,CAAS,eAAgB,CAAI,EAAA;AACjE,MAAA,uBAAA,CAAyB,IAAK,CAAA,GAAI,MAAM,IAAA,EAAM,iBAAoB,IAAA,CAAA;AAAA,KACnE;AAEA,IAAO,OAAA,uBAAA,CAAA;AAAA,GACR,CAAA;AAGA,EAAA,MAAM,eAAe,MAAM;AAC1B,IAAA,KAAA,MAAY,IAAQ,IAAA,MAAA,CAAO,MAAQ,CAAA,eAAgB,CAAI,EAAA;AACtD,MAAA,IAAA,CAAK,YAAe,IAAA,CAAA;AAAA,KACrB;AAAA,GACD,CAAA;AAEA,EAAO,OAAA;AAAA,IACN,GAAG,WAAA;AAAA,IACH,YAAA;AAAA,IACA,iBAAA;AAAA,GACD,CAAA;AACD;;ACtFA;AAAA;AAAA;AAAA;AAYO,SAAS,wBAA0D,GAAA;AACzE,EAAM,MAAA,OAAA,GAAU,OAAO,KAAO,EAAA,OAAA,CAAA;AAE9B,EAAK,IAAA,CAAC,iBAAmB,CAAA,OAAQ,CAAI,EAAA;AACpC,IAAO,OAAA,IAAA,CAAA;AAAA,GACR;AAEA,EAAO,OAAA;AAAA,IACN,MAAQ,EAAA,KAAA;AAAA,IACR,OAAA;AAAA,GACD,CAAA;AACD;;ACvBA;AAAA;AAAA;AAAA;AA4BO,SAAS,qBACf,CAAA;AAAA,EACC,OAAA;AAAA,EACA,KAAQ,GAAA,MAAA;AACT,CAC8C,EAAA;AAC9C,EAAO,OAAA;AAAA;AAAA,IAEN,OAAS,EAAA;AAAA,MACR,iBAAA,CAAmB,OAAS,EAAA,UAAA,EAAY,OAAQ,CAAA;AAAA,KACjD;AAAA;AAAA,IAGA,GAAG,KAAS,IAAA;AAAA,MACX,WAAA,EAAa,CAAE,iBAAmB,CAAA,OAAA,EAAS,iBAAkB,KAAM,CAAA,IAAA,CAAA,EAAQ,OAAQ,CAAE,CAAA;AAAA,KACtF;AAAA;AAAA,IAGA,iBAAmB,EAAA,YAClB,kBAAoB,CAAA,CAAE,OAAQ,CAAE,CAAA;AAAA;AAAA,IAGjC,cAAc,MAAM;AACnB,MAAA,MAAM,mBAAmB,wBAAyB,EAAA,CAAA;AAElD,MAAK,IAAA,gBAAA,IAAoB,gBAAiB,CAAA,OAAA,KAAY,OAAU,EAAA;AAC/D,QAAA,MAAM,IAAI,KAAA;AAAA,UACT,CAAgD,4CAAA,EAAA,gBAAA,CAAiB,OAAQ,CAAA,6EAAA,EACM,OAAQ,CAAA,SAAA,CAAA;AAAA,SACxF,CAAA;AAAA,OACD;AAAA,KACD;AAAA,GACD,CAAA;AACD;;AC7DA;AAAA;AAAA;AAAA;AAyCO,SAAS,uBACf,YACgD,EAAA;AAChD,EAAA,MAAM,sBAAyB,GAAA,eAAA,CAAiB,YAAc,EAAA,CAAE,YAAY,UAAgB,KAAA;AAC3F,IAAA,IAAK,CAAC,UAAa,EAAA;AAClB,MAAO,OAAA,KAAA,CAAA,CAAA;AAAA,KACR;AAEA,IAAM,MAAA,oBAAA,GAAuB,4BAA6B,UAAW,CAAA,CAAA;AAErE,IAAO,OAAA;AAAA;AAAA,MAEN,iBAAmB,EAAA,YAClB,kBAAoB,CAAA,CAAE,UAAkB,CAAE,CAAA;AAAA;AAAA,MAG3C,GAAG,oBAAA;AAAA,KACJ,CAAA;AAAA,GACC,CAAA,CAAA;AAGF,EAAO,OAAA,wBAAA;AAAA,IACN,sBAAA;AAAA,GACD,CAAA;AACD;;ACjEA;AAAA;AAAA;AAAA;AA0EO,SAAS,kBACf,MACuC,EAAA;AACvC,EAAM,MAAA;AAAA,IACL,OAAA;AAAA,IAAS,YAAA;AAAA,IAAc,OAAA;AAAA,IACvB,OAAA;AAAA,IAAS,KAAA;AAAA,IACT,8BAAiC,GAAA;AAAA,MAChC,WAAa,EAAA,WAAA;AAAA,KACd;AAAA,GACG,GAAA,MAAA,CAAA;AAEJ,EAAA,MAAM,OAAO,wBAA0B,CAAA;AAAA,IACtC,UAAU,yBAA2B,CAAA;AAAA,MACpC,OAAA;AAAA,MACA,YAAA;AAAA,KACC,CAAA;AAAA,IAEF,GAAG,OAAW,IAAA;AAAA,MACb,yBAAyB,4BAA8B,CAAA;AAAA,QACtD,OAAA;AAAA,QACA,YAAA;AAAA,OACC,CAAA;AAAA,KACH;AAAA,IAEA,GAAG,KAAS,IAAA;AAAA,MACX,KAAA,EAAO,sBAAuB,KAAM,CAAA;AAAA,KACrC;AAAA,IAEA,aAAe,EAAA,sBAAA,CAAwB,OAAW,IAAA,EAAG,CAAA;AAAA,GACpD,CAAA,CAAA;AAEF,EAAO,OAAA,sBAAA;AAAA,IACN;AAAA,MACC,GAAG,IAAA;AAAA,MACH,cAAgB,EAAA,8BAAA;AAAA,KACjB;AAAA,GACD,CAAA;AACD;;;;"}